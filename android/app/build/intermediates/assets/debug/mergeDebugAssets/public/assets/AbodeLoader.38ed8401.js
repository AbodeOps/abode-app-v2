import{am as s,an as a,P as l,d as h,o as _,i as w,e as B,ar as m,ak as g,al as j,b as u,_ as b}from"./index.34c5d693.js";import"./helpers.38b13223.js";class c{static async fetchProjects(){try{return(await s.get("/projects")).data}catch(t){a(t)}}static async fetchFundedProjects(){try{return(await s.get("/funds")).data}catch(t){a(t)}}static async fetchProjectById(t){try{return(await s.get(`/projects/${t}`)).data}catch(r){a(r)}}static async fetchBids(t){try{return(await s.get(`/offers/${t}/bids`)).data}catch(r){a(r)}}static async fetchUserBids(){try{return(await s.get("/bids/all")).data}catch(t){a(t)}}static async fetchAllOffers(){try{return(await s.get("/offers")).data}catch(t){a(t)}}static async fetchSubscriptionById(t){try{return(await s.get(`/funds/${t}`)).data}catch(r){a(r)}}static async fetchOfferById(t){try{return(await s.get(`/offers/${t}`)).data}catch(r){a(r)}}static async fundProject({projectId:t,amount:r,reference:o,type:d,units:p,bankCode:n,proof:f=null}){try{const i=new FormData;return i.append("project_id",t.toString()),i.append("amount",r.toString()),i.append("reference",o),i.append("type",d),i.append("units",p.toString()),i.append("paying_bank_code",n.toString()),f&&i.append("payment_proof",f),(await s.post(`projects/${t}/fund`,i)).data}catch(i){a(i)}}static async createOffer({subscriptionId:t,unitPrice:r,units:o}){try{return(await s.post(`funds/${t}/sell`,{fund_id:t,unit_price:r,units:o})).data}catch(d){a(d)}}static async createBid({offerId:t,unitPrice:r,units:o}){try{return(await s.post(`offers/${t}/bid`,{offer_id:t,unit_price:r,units:o})).data}catch(d){a(d)}}static async sellAsGroup({action:t,id:r}){try{return(await s.post(`/funds/${r}/sell-as-group`,{action:t})).data}catch(o){a(o)}}static async acceptBid({id:t}){try{return(await s.post(`/bids/${t}/accept-or-reject`,{action:!0})).data}catch(r){a(r)}}static async rejectBid({id:t}){try{return(await s.post(`/bids/${t}/accept-or-reject`,{action:!1})).data}catch(r){a(r)}}static async payBid({bidId:t,reference:r,type:o,bankCode:d,proof:p}){try{const n=new FormData;return n.append("bid_id",t.toString()),n.append("amount","2500"),n.append("reference",r),n.append("type",o),n.append("paying_bank_code",d.toString()),n.append("payment_proof",p),(await s.post(`bids/${t}/pay`,n)).data}catch(n){a(n)}}}const O=l({id:"assets",persist:!0,state:()=>({assets:[],subscriptions:[]}),getters:{},actions:{async fetchAssets(){const e=await c.fetchProjects();return this.assets=e.data.map(t=>({...t,totalUnits:t.expected_slots,percentFunded:Number(t.percent_funded),potentialGrowth:t.potential_growth})),e},async fetchAllOffers(){return await c.fetchAllOffers()},async fetchSubscriptions(){const e=await c.fetchFundedProjects();return this.subscriptions=e.data.map(t=>({...t,userId:t.user_id,project:{...t.project,totalUnits:t.project.expected_slots,potentialGrowth:t.project.potential_growth,percentFunded:Number(t.project.percent_funded)}})),e},async fetchAssetById(e){return await c.fetchProjectById(e)},async fetchSubscriptionById(e){return await c.fetchSubscriptionById(e)},async fetchOfferById(e){return await c.fetchOfferById(e)},async buyAsset(e){return await c.fundProject(e)},async createOffer(e){return await c.createOffer(e)},async createBid(e){return await c.createBid(e)},async fetchBids({offerId:e}){return await c.fetchBids(e)},async fetchMyBids(){return await c.fetchUserBids()},async sellAsGroup({fundId:e,action:t}){return await c.sellAsGroup({id:e,action:t})},async acceptBid({bidId:e}){return await c.acceptBid({id:e})},async rejectBid({bidId:e}){return await c.rejectBid({id:e})},async payBid(e){return await c.payBid(e)}}}),y=e=>(g("data-v-0d0ef181"),e=e(),j(),e),S={class:"flex flex-col h-screen items-center mt-32"},A=y(()=>u("div",{class:"relative w-full sm:w-1/2 bg-gray-200 rounded-xl mt-5"},[u("div",{class:"w-full h-3 rounded-xl shim-green animate-pulse"})],-1)),v=y(()=>u("div",{class:"text-md"},null,-1)),x=h({__name:"AbodeLoader",setup(e){return(t,r)=>(_(),w("div",S,[B(m,{class:"animate-bounce h-32 w-32 cursor-pointer animate-pulse"}),A,v]))}});const F=b(x,[["__scopeId","data-v-0d0ef181"]]);export{F as A,O as u};
